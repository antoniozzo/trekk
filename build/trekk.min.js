!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("trekk",[],t):"object"==typeof exports?exports.trekk=t():e.trekk=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="build/",t(t.s=13)}([function(e,t,n){"use strict";function r(e){return"function"==typeof e}function o(e){return"object"===("undefined"==typeof e?"undefined":v(e))}function u(e){return parseInt(e,10)/100}function i(e,t){return e<t}function a(e,t){return e>t}function s(e,t,n){return e>=t&&e<=n}function f(e,t,n,r){var o=e*(1-n)+t*n;return r?Math.round(o):o}function l(e){return Object.keys(e).map(function(t){return e[t]})}function c(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=e.classList).remove.apply(t,r)}function d(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=e.classList).add.apply(t,r)}function p(e){var t=e,n=0;do n+=t.offsetTop||0,t=t.offsetParent;while(t);return n}Object.defineProperty(t,"__esModule",{value:!0});var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isFunction=r,t.isObject=o,t.parsePercentage=u,t.isLesserThan=i,t.isGreaterThan=a,t.isInBetween=s,t.lerp=f,t.objectToArray=l,t.removeClassesFromElement=c,t.addClassesToElement=d,t.getElementTop=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_ARRAY=t.STATUS=void 0;var r=n(0),o=t.STATUS={LOADING:"loading",WAITING:"waiting",WALKING:"walking",FINISHED:"finished"};t.STATUS_ARRAY=(0,r.objectToArray)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=1e3,o=0;t.default=function(e){var t=void 0,n=void 0;return function(){return n!==o&&(n=o,t=e()),t}};t.clear=function(){o++};setInterval(function(){o++},r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;var r=n(0),o=t.update=function(e,t){var n=e.store,o=e.options,u=n.getState(),i=n.reduce(t);return o.progress&&u.progress!==i.progress&&o.progress(i.progress,e),u.status!==i.status&&(0,r.isFunction)(o[i.status])&&o[i.status](e),i};t.default=function(e,t){var n=!0,r=function r(){if(n)for(var u=t.source()+t.offset(),i=+new Date,a=0;a<e.length;a+=1){o(e[a],u);var s=+new Date;if(s-i>t.fps)break}t.iterate(r)};return t.iterate(r),{enable:function(){n=!0},disable:function(){n=!1}}}},function(e,t,n){"use strict";function r(e){var t=document.createElement("div"),n=document.createElement("span"),r=document.createElement("div");return t.style.zIndex=999,t.style.width="100%",t.style.position="absolute",t.style.top=e+"px",t.style.left=0,n.style.borderWidth=0,n.style.borderStyle="dashed",n.style.position="absolute",n.style.padding="2px 5px",document.body.appendChild(t),{remove:function(){return document.body.removeChild(t),this},color:function(e){return r.style.borderLeftColor=e,n.style.color=e,n.style.borderColor=e,this},fixed:function(){return t.style.position="fixed",this},label:function(e,r){return n.innerHTML=e,t.appendChild(n),r?(n.style.bottom=0,n.style.borderBottomWidth="1px"):(n.style.top=0,n.style.borderTopWidth="1px"),this},col:function(e){return t.style.left=20*e+"px",this},width:function(e){return n.style.width=e,this},line:function(e){return r.style.borderLeft="1px dashed green",r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.width="1px",r.style.height=e+"px",t.appendChild(r),this}}}Object.defineProperty(t,"__esModule",{value:!0}),t.makeGuide=r,t.default=function(e,t){var n=[],o=function(){n.forEach(function(e){return e.remove()}),n=[],e.forEach(function(e){n.push(r(e.start()).color(e.options.color).label(e.options.label)),n.push(r(e.end()).color(e.options.color).label(e.options.label,!0))}),n.push(r(t.offset()).color("red").width("100%").label("").fixed())};window.addEventListener("resize",o),o()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultModifier=t.defaultEnd=t.defaultStart=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(10),i=r(u),a=n(11),s=r(a),f=n(2),l=r(f),c=n(3),d=r(c),p=t.defaultStart=function(){return 0},v=t.defaultEnd=function(){return 0},m=t.defaultModifier=function(e,t,n){return(e-t)/(n-t)},y=function(e){return function(t){var n=o({color:"green",label:"Undefined",start:p,end:v,modifier:m,lerp:1},t,{ease:t.ease&&d.default[t.ease]||t.ease||d.default.linear}),r=(0,l.default)(n.start),u=(0,l.default)(n.end),a={options:n,start:r,end:u};return a.store=(0,s.default)((0,i.default)(a)),e.push(a),a}},h=function(e){return function(t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}};t.default=function(e){return{addTimeline:y(e),removeTimeline:h(e)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getTimelineOptions=t.addStatusClassNameToElement=t.defaultScope=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(9),i=r(u),a=n(1),s=n(0),f=t.defaultScope={start:function(){return 0},end:function(){return 0}},l=t.addStatusClassNameToElement=function(e,t){a.STATUS_ARRAY.map(function(t){return(0,s.removeClassesFromElement)(e,t)}),(0,s.addClassesToElement)(e,t)},c=t.getTimelineOptions=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var u=void 0,f=void 0,c=(0,i.default)([{element:i.default.OBJECT|i.default.Optional},{startPercentage:i.default.STRING|i.default.Optional},{endPercentage:i.default.STRING|i.default.Optional},{startPixels:i.default.INT|i.default.Optional},{endPixels:i.default.INT|i.default.Optional},{progress:i.default.FUNCTION|i.default.Optional},{options:i.default.OBJECT|i.default.Optional,_default:{}}],n),d=c.element,p=c.startPercentage,v=c.endPercentage,m=c.startPixels,y=c.endPixels,h=c.progress,g=c.options;d&&(u=function(){return(0,s.getElementTop)(d)},f=function(){return u()+d.offsetHeight}),v&&!function(){var t=(0,s.parsePercentage)(v);f=function(){return e.start()+(e.end()-e.start())*t}}(),y&&(f=function(){return e.start()+y}),p&&!function(){var t=(0,s.parsePercentage)(p);u=function(){return e.start()+(e.end()-e.start())*t}}(),m&&(u=function(){return e.start()+m}),u||(u=e.start,f=e.end),f||(f=u);var b=(0,s.isFunction)(g.offset)&&g.offset||g.offset&&function(){return g.offset};return o({progress:h,start:b&&function(){return u()+b()}||u,end:b&&function(){return f()-b()}||f},g,(0,s.isObject)(n[0])&&a.STATUS_ARRAY.reduce(function(e,t){return e[t]=function(e){l(n[0],t),(0,s.isFunction)(g[t])&&g[t](e)},e},{})||{})};t.default=function(e){var t=e.addTimeline,n=function e(n){return function(){for(var r=arguments.length,o=Array(r),u=0;u<r;u++)o[u]=arguments[u];var i=c.apply(void 0,[n].concat(o));t(i);var a=e(i);return a.options=i,a}};return n(f)}},function(e,t,n){for(var r=n(12),o="undefined"==typeof window?global:window,u=["moz","webkit"],i="AnimationFrame",a=o["request"+i],s=o["cancel"+i]||o["cancelRequest"+i],f=0;!a&&f<u.length;f++)a=o[u[f]+"Request"+i],s=o[u[f]+"Cancel"+i]||o[u[f]+"CancelRequest"+i];if(!a||!s){var l=0,c=0,d=[],p=1e3/60;a=function(e){if(0===d.length){var t=r(),n=Math.max(0,p-(t-l));l=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return d.push({handle:++c,callback:e,cancelled:!1}),c},s=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return a.call(o,e)},e.exports.cancel=function(){s.apply(o,arguments)},e.exports.polyfill=function(){o.requestAnimationFrame=a,o.cancelAnimationFrame=s}},function(e,t,n){var r,o;!function(u,i,a){"undefined"!=typeof e&&e.exports?e.exports=a():(r=a,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o)))}("Args",this,function(){"use strict";Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var e=function(e){var t={};t.defValue=void 0,t.typeValue=void 0,t.customCheck=void 0;for(var n in e)e.hasOwnProperty(n)&&("_default"===n?t.defValue=e[n]:"_type"===n?t.typeValue=e[n]:"_check"===n?t.customCheck=e[n]:t.sname=n);if(t.sarg=e[t.sname],"object"==typeof t.customCheck&&t.customCheck instanceof RegExp){var r=t.customCheck;t.customCheck=function(e){return!!e.toString().match(r)}}return t},t=function(e,t){var n=!1;return 0!==(t.sarg&f.ANY)?n=!0:0!==(t.sarg&f.STRING)&&"string"==typeof e?n=!0:0!==(t.sarg&f.FUNCTION)&&"function"==typeof e?n=!0:0!==(t.sarg&f.INT)&&"number"==typeof e&&Math.floor(e)===e?n=!0:0!==(t.sarg&f.FLOAT)&&"number"==typeof e?n=!0:0!==(t.sarg&f.ARRAY)&&Array.isArray(e)?n=!0:0===(t.sarg&f.OBJECT)&&void 0===t.typeValue||"object"!=typeof e||!(void 0===t.typeValue||e instanceof t.typeValue)?0!==(t.sarg&f.ARRAY_BUFFER)&&e.toString().match(/ArrayBuffer/)?n=!0:0!==(t.sarg&f.DATE)&&e instanceof Date?n=!0:0!==(t.sarg&f.BOOL)&&"boolean"==typeof e?n=!0:0!==(t.sarg&f.DOM_EL)&&(e instanceof HTMLElement||void 0!==window.$&&e instanceof window.$)&&(n=!0):n=!0,void 0!==t.customCheck&&"function"==typeof t.customCheck&&(n=!!t.customCheck(e)),n},n=function(e){return 0!=(e.sarg&(f.ANY|f.STRING|f.FUNCTION|f.INT|f.FLOAT|f.OBJECT|f.ARRAY_BUFFER|f.DATE|f.BOOL|f.DOM_EL|f.ARRAY))||void 0!==e.typeValue},r=function(e){var t=e.sarg,n=e.typeValue,r=e.customCheck;return 0!==(t&f.STRING)?"String":0!==(t&f.FUNCTION)?"Function":0!==(t&f.INT)?"Int":0!==(t&f.FLOAT)?"Float":0!==(t&f.ARRAY)?"Array":0!==(t&f.OBJECT)?void 0!==n?"Object ("+n.toString()+")":"Object":0!==(t&f.ARRAY_BUFFER)?"Arry Buffer":0!==(t&f.DATE)?"Date":0!==(t&f.BOOL)?"Bool":0!==(t&f.DOM_EL)?"DOM Element":void 0!==r?"[Custom checker]":"unknown"},o=function(n,r,o){for(var u=!1,i=0;i<r.length;i++){var a=function(e){var r=!1;for(var u in n){var i=n[u];if(u===e.sname&&t(i,e)){o[u]=i,r=!0;break}}return r}(e(r[i]));a&&r.splice(i--,1),u|=a}return u},u=function(e,t){return!(!e||!t)&&((e.sarg&~(f.Optional|f.Required))===(t.sarg&~(f.Optional|f.Required))&&e.typeValue===t.typeValue)},i=function(e){return!a(e)},a=function(e){return 0!==(e&f.Optional)},s=function(e,t,o){var u="";if(n(e))u="Argument "+t+" ("+e.sname+") should be type "+r(e)+", but it was type "+typeof o+" with value "+o+".";else if(void 0!==e.customCheck){var i=e.customCheck.toString();i.length>50&&(i=i.substr(0,40)+"..."+i.substr(i.length-10)),u="Argument "+t+" ("+e.sname+") does not pass the custom check ("+i+")."}else u="Argument "+t+" ("+e.sname+") has no valid type specified.";return u},f=function(l,c){if(void 0===l)throw new Error("The scheme has not been passed.");if(void 0===c)throw new Error("The arguments have not been passed.");c=Array.prototype.slice.call(c,0);var d,p,v={},m=void 0,y=void 0,h=[],g=function(e){(!y||!u(y,e)||i(y.sarg)&&a(e.sarg))&&(h=[]),(h.length>0||a(e.sarg))&&(y=e,h.push(e))},b=function(e,n,r){if(void 0===r&&(r=h.length-1),!(r<0)){var o=h[r],u=v[o.sname];return t(u,e)?(v[e.sname]=u,v[o.sname]=o.defValue||void 0,0===(o.sarg&f.Optional)&&b(o,n,r-1),void 0):s(e,n,u)}},O=c[c.length-1];for(null!==O&&"object"==typeof O&&O.constructor===Object&&o(c[c.length-1],l,v)&&c.splice(c.length-1,1),d=0,p=0;p<l.length&&(d=function(o,i){var a=c[o];if(l[i]instanceof Array){for(var d=l[i],p=void 0,h=!1,O=0;O<d.length;O++){var T=d[O];if(T===f.Optional)h=!0;else{var A=e(T);t(a,A)&&(p=A.sname)}}if(void 0===p&&!h){if(null===a||void 0===a)return m="Argument "+o+" is null or undefined but it must be not null.",o;m="Argument "+o+" should be one of: ";for(var O=0;O<d.length;O++){var A=e(d[O]);m+=r(A)+", "}return m+="but it was type "+typeof a+" with value "+a+".",o}if(void 0!==p)return v[p]=a,o+1}else{var A=e(l[i]);if(0===(A.sarg&f.Optional)){if(null===a||void 0===a)return n(A)&&u(A,y)?(m=b(A,o),""===m&&g(A),o):(m="Argument "+o+" ("+A.sname+") is null or undefined but it must be not null.",o);if(t(a,A))return v[A.sname]=a,g(A),o+1;if(n(A)&&u(A,y)){if(m=b(A,o),""===m)return g(A),o+1}else m=s(A,o,a);return o}if(null===a||void 0===a)return void 0!==A.defValue?v[A.sname]=A.defValue:v[A.sname]=a,o+1;if(t(a,A))return v[A.sname]=a,g(A),o+1;if(void 0!==A.defValue)return v[A.sname]=A.defValue,o}return o}(d,p),!m);p++);if(m)throw new Error(m);return v};return f.ANY=1,f.STRING=2,f.FUNCTION=4,f.INT=8,f.FLOAT=16,f.ARRAY_BUFFER=32,f.OBJECT=64,f.DATE=128,f.BOOL=256,f.DOM_EL=512,f.ARRAY=1024,f.Optional=2048,f.NotNull=f.Required=4096,f})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nextStatus=t.nextProgress=void 0;var r=n(1),o=n(0),u=t.nextProgress=function(e){var t=e.options,n=e.start,r=e.end,u=e.state,i=e.source,a=t.ease(t.modifier(i,n,r));return t.lerp&&u.progress.toFixed(3)!==a.toFixed(3)&&(a=(0,o.lerp)(u.progress,a,t.lerp)),a>=1&&(a=1),a<=0&&(a=0),a},i=t.nextStatus=function(e){var t=e.start,n=e.end,u=e.source;return(0,o.isLesserThan)(u,t)?r.STATUS.WAITING:(0,o.isInBetween)(u,t,n)?r.STATUS.WALKING:(0,o.isGreaterThan)(u,n)?r.STATUS.FINISHED:r.STATUS.LOADING},a={status:r.STATUS.LOADING,progress:-1};t.default=function(e){return function(t,n){if(t){var r=e.options,o=e.start(),s=e.end();return{status:i({start:o,end:s,source:n}),progress:u({state:t,options:r,start:o,end:s,source:n})}}return a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e();return{getState:function(){return t},reduce:function(n){return t=e(t,n)}}},e.exports=t.default},function(e,t){(function(){var t,n,r;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-r)/1e6},n=process.hrtime,t=function(){var e;return e=n(),1e9*e[0]+e[1]},r=t()):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.trail=t.removeTimeline=t.addTimeline=t.cache=t.easings=t.utilities=t.constants=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(8),a=o(i),s=n(6),f=o(s),l=n(7),c=o(l),d=n(5),p=o(d),v=n(4),m=o(v),y=n(2),h=r(y),g=n(1),b=r(g),O=n(0),T=r(O),A=n(3),w=r(A);t.constants=b,t.utilities=T,t.easings=w,t.cache=h;var S=[],_=(0,f.default)(S),x=_.addTimeline,I=_.removeTimeline;t.addTimeline=x,t.removeTimeline=I;var E=(t.trail=(0,c.default)(_),{source:function(){return window.pageYOffset||document.documentElement.scrollTop},offset:(0,h.default)(function(){return window.innerHeight/2}),iterate:a.default,fps:1e3/60,debug:!1});t.default=function(e){var t=u({},E,e);return t.debug&&(0,p.default)(S,t),(0,m.default)(S,t)}}])});